title: 策略模式和观察者模式
date: 2018/12/02
categories:

- 改善代码
- 设计模式
tags:
-  策略模式
-  观察者模式 
comments: true
---

#### 为什么要设计模式

软件开发中，我们花费更多的时间在需求变化和维护项目上，想更好得应对变化需要建立弹性的，可维护、可应对变化的设计。而知道抽象、继承、多态，并不能马上成为面向对象设计者，设计模式正是告诉我们如何组织类和对象以解决某种问题，所以需要设计模式。

其实我们正在使用的框架封装了很多设计模式，但是我们感觉不到。可以先让设计模式进入你的脑海，再尝试使用。

#### 策略模式

现在有个模拟鸭子的游戏，游戏中出现各种鸭子，比如一边游泳，一边呱呱叫，每个鸭子的外形不同。使用面向对象（OO）技术，设计类图如下

![duck1](/images/20181202/duck1.png)

**需求变动**，有些鸭子要添加飞的特性，会飞的特性代码添加在哪里呢？
- 父类 Duck 的实现代码中，这样会导致全部鸭子都会飞，明显不行。
  - **解决方案**，可以把 fly() 覆盖掉，使得鸭子不会飞。但也有鸭子会飞不会叫，采用同样的方法覆盖 quack() 
  - **缺点**，很难知道鸭子全部行为、代码在多个子类中重复
-  利用接口，把 fly() quack() 方法接口出去




#### 观察者模式







欢迎大家给我留言，提建议，指出错误，一起讨论学习技术的感受！